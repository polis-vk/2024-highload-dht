# Stage 1

1) Путём экспериментов было выявлено, что для put запросов сервер
   начинает сильно деградировать при `rps = 15000`, для get запросов при `rps=45000`.
   Возьму дефолтные значения для профилирования `10500` и `30000` соответственно.


2) При профилировании put можно увидеть, что cpu и аллокации распределены более менее равномерно:
   50% у cpu и 55% аллокаций занимает переопределённый метод handleRequest(), однако мест для оптимизаций
   я не нашёл.


3) Так же протестировав с аннотациями `@Path` и `@RequestMethod` и без них, удалось выявить некоторые накладные расходы,
   которые происходят из-за генерации хэндлеров.
   Основные изменения, логично, произошли в методе handleRequest().

        CPU:
        - С аннотациями - 54%
        - Без аннотаций - 50%
         
        alloc:
        - С аннотациями - 60%
        - Без аннотаций - 55%

4) При профилировании get так же основная нагрузка приходится на handleRequest(), внутри которого
   и вызывается getEntity(). Посмотрев на код, я не нашёл места, где происходит лишняя нагрузка или лишние аллокации.

На данный момент единственная оптимизация, которой получилось добиться - написать свой раутинг запросов,
не используя сгенерированные one-nio хэндлеры.

5) Из интереса попробовал запустить put и get с двумя потоками.
   В общем, нагрузка на cpu и количество аллокаций в методе handleRequest() увеличились примерно на 5%.