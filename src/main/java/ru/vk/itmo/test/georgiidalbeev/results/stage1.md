## Отчет

### Нахождение точки разладки для put запроса
Был написан скрипт, который инициализирует генератор случайных чисел, 
создает случайные строки заданной длины и формирует PUT запросы с 
различными идентификаторами и телами запросов. 

```
Running 10s test @ http://localhost:8080
  1 threads and 1 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   370.76ms  196.02ms 636.42ms   52.73%
    Req/Sec       -nan      -nan   0.00      0.00%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%  385.02ms
 75.000%  566.78ms
 90.000%  599.04ms
 99.000%  628.73ms
 99.900%  636.41ms
 99.990%  636.93ms
 99.999%  636.93ms
100.000%  636.93ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       0.246     0.000000            1         1.00
      81.151     0.100000        12175         1.11
     147.327     0.200000        24352         1.25
     262.655     0.300000        36528         1.43
     307.967     0.400000        48705         1.67
     385.023     0.500000        60905         2.00
     426.751     0.550000        66951         2.22
     481.535     0.600000        73127         2.50
     518.143     0.650000        79129         2.86
     557.567     0.700000        85331         3.33
     566.783     0.750000        91718         4.00
     569.343     0.775000        94515         4.44
     577.535     0.800000        97387         5.00
     584.191     0.825000       100598         5.71
     588.799     0.850000       103633         6.67
     592.895     0.875000       106584         8.00
     595.455     0.887500       108225         8.89
     599.039     0.900000       109568        10.00
     604.159     0.912500       111083        11.43
     607.743     0.925000       112677        13.33
     609.791     0.937500       114210        16.00
     612.351     0.943750       115094        17.78
     613.375     0.950000       115684        20.00
     614.911     0.956250       116462        22.86
     615.935     0.962500       117340        26.67
     616.959     0.968750       118054        32.00
     617.471     0.971875       118307        35.56
     618.495     0.975000       118855        40.00
     620.031     0.978125       119068        45.71
     625.151     0.981250       119486        53.33
     626.687     0.984375       120005        64.00
     627.199     0.985938       120295        71.11
     627.199     0.987500       120295        80.00
     627.711     0.989062       120439        91.43
     631.295     0.990625       120607       106.67
     632.831     0.992188       120802       128.00
     633.343     0.992969       120917       142.22
     633.855     0.993750       120995       160.00
     634.879     0.994531       121124       182.86
     635.391     0.995313       121345       213.33
     635.391     0.996094       121345       256.00
     635.391     0.996484       121345       284.44
     635.391     0.996875       121345       320.00
     635.903     0.997266       121496       365.71
     635.903     0.997656       121496       426.67
     635.903     0.998047       121496       512.00
     636.415     0.998242       121681       568.89
     636.415     0.998437       121681       640.00
     636.415     0.998633       121681       731.43
     636.415     0.998828       121681       853.33
     636.415     0.999023       121681      1024.00
     636.415     0.999121       121681      1137.78
     636.415     0.999219       121681      1280.00
     636.415     0.999316       121681      1462.86
     636.415     0.999414       121681      1706.67
     636.415     0.999512       121681      2048.00
     636.415     0.999561       121681      2275.56
     636.415     0.999609       121681      2560.00
     636.927     0.999658       121723      2925.71
     636.927     1.000000       121723          inf
#[Mean    =      370.760, StdDeviation   =      196.017]
#[Max     =      636.416, Total count    =       121723]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  121724 requests in 10.00s, 7.78MB read
Requests/sec:  12172.47
Transfer/sec:    796.44KB
```

Был понижен rps с 13000 до 12000, для стабильной работы.

```
Running 10s test @ http://localhost:8080
  1 threads and 1 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    15.99ms    9.06ms  33.89ms   62.08%
    Req/Sec       -nan      -nan   0.00      0.00%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%   18.05ms
 75.000%   23.84ms
 90.000%   26.54ms
 99.000%   31.12ms
 99.900%   33.18ms
 99.990%   33.76ms
 99.999%   33.89ms
100.000%   33.92ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       0.057     0.000000            1         1.00
       2.573     0.100000        12002         1.11
       6.031     0.200000        23983         1.25
       9.215     0.300000        35986         1.43
      13.415     0.400000        47971         1.67
      18.047     0.500000        60018         2.00
      19.471     0.550000        65964         2.22
      21.023     0.600000        71978         2.50
      22.143     0.650000        78029         2.86
      23.119     0.700000        83967         3.33
      23.839     0.750000        90012         4.00
      24.143     0.775000        92951         4.44
      24.495     0.800000        95937         5.00
      24.863     0.825000        99024         5.71
      25.311     0.850000       101984         6.67
      25.887     0.875000       104944         8.00
      26.223     0.887500       106482         8.89
      26.543     0.900000       107936        10.00
      26.927     0.912500       109420        11.43
      27.423     0.925000       110960        13.33
      28.159     0.937500       112442        16.00
      28.479     0.943750       113172        17.78
      28.735     0.950000       113941        20.00
      29.007     0.956250       114688        22.86
      29.263     0.962500       115459        26.67
      29.535     0.968750       116192        32.00
      29.679     0.971875       116547        35.56
      29.871     0.975000       116946        40.00
      30.079     0.978125       117297        45.71
      30.239     0.981250       117679        53.33
      30.463     0.984375       118052        64.00
      30.607     0.985938       118238        71.11
      30.767     0.987500       118428        80.00
      30.959     0.989062       118603        91.43
      31.263     0.990625       118796       106.67
      31.583     0.992188       118975       128.00
      31.823     0.992969       119068       142.22
      32.063     0.993750       119169       160.00
      32.271     0.994531       119264       182.86
      32.399     0.995313       119361       213.33
      32.527     0.996094       119447       256.00
      32.591     0.996484       119492       284.44
      32.655     0.996875       119542       320.00
      32.703     0.997266       119584       365.71
      32.767     0.997656       119634       426.67
      32.831     0.998047       119682       512.00
      32.895     0.998242       119722       568.89
      32.927     0.998437       119729       640.00
      33.023     0.998633       119751       731.43
      33.151     0.998828       119780       853.33
      33.183     0.999023       119794      1024.00
      33.247     0.999121       119810      1137.78
      33.279     0.999219       119821      1280.00
      33.311     0.999316       119834      1462.86
      33.343     0.999414       119841      1706.67
      33.439     0.999512       119855      2048.00
      33.503     0.999561       119863      2275.56
      33.535     0.999609       119867      2560.00
      33.567     0.999658       119875      2925.71
      33.599     0.999707       119882      3413.33
      33.599     0.999756       119882      4096.00
      33.631     0.999780       119888      4551.11
      33.631     0.999805       119888      5120.00
      33.663     0.999829       119892      5851.43
      33.695     0.999854       119894      6826.67
      33.759     0.999878       119899      8192.00
      33.759     0.999890       119899      9102.22
      33.791     0.999902       119902     10240.00
      33.791     0.999915       119902     11702.86
      33.823     0.999927       119904     13653.33
      33.823     0.999939       119904     16384.00
      33.855     0.999945       119907     18204.44
      33.855     0.999951       119907     20480.00
      33.855     0.999957       119907     23405.71
      33.855     0.999963       119907     27306.67
      33.887     0.999969       119910     32768.00
      33.887     0.999973       119910     36408.89
      33.887     0.999976       119910     40960.00
      33.887     0.999979       119910     46811.43
      33.887     0.999982       119910     54613.33
      33.887     0.999985       119910     65536.00
      33.887     0.999986       119910     72817.78
      33.887     0.999988       119910     81920.00
      33.887     0.999989       119910     93622.86
      33.887     0.999991       119910    109226.67
      33.919     0.999992       119911    131072.00
      33.919     1.000000       119911          inf
#[Mean    =       15.987, StdDeviation   =        9.061]
#[Max     =       33.888, Total count    =       119911]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  119912 requests in 10.00s, 7.66MB read
Requests/sec:  11991.30
Transfer/sec:    784.59KB
```

Была построена гистограмма распределения запросов:

![normal_put_result.png](..%2Fwrk_result%2Fgraph%2Fnormal_put_result.png)

### Нахождение точки разладки для get запроса
Скрипт использует генератор случайных чисел для 
создания случайных идентификаторов

Аналоино был понижен rps с 13000 до 12000, для стабильной работы.

```
Running 10s test @ http://localhost:8080
  1 threads and 1 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     3.21ms    2.71ms  14.29ms   75.33%
    Req/Sec       -nan      -nan   0.00      0.00%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%    2.31ms
 75.000%    4.62ms
 90.000%    7.23ms
 99.000%   11.88ms
 99.900%   13.63ms
 99.990%   14.26ms
 99.999%   14.30ms
100.000%   14.30ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       0.053     0.000000            1         1.00
       0.606     0.100000        12008         1.11
       0.984     0.200000        24018         1.25
       1.331     0.300000        36000         1.43
       1.780     0.400000        47998         1.67
       2.305     0.500000        59979         2.00
       2.611     0.550000        66001         2.22
       2.947     0.600000        71985         2.50
       3.399     0.650000        77972         2.86
       4.011     0.700000        83969         3.33
       4.619     0.750000        89995         4.00
       4.943     0.775000        92973         4.44
       5.363     0.800000        95996         5.00
       5.859     0.825000        98967         5.71
       6.335     0.850000       101978         6.67
       6.779     0.875000       104959         8.00
       7.007     0.887500       106489         8.89
       7.227     0.900000       107961        10.00
       7.503     0.912500       109476        11.43
       7.779     0.925000       110975        13.33
       8.115     0.937500       112471        16.00
       8.319     0.943750       113222        17.78
       8.543     0.950000       113969        20.00
       8.871     0.956250       114718        22.86
       9.319     0.962500       115462        26.67
       9.927     0.968750       116211        32.00
      10.247     0.971875       116580        35.56
      10.519     0.975000       116955        40.00
      10.743     0.978125       117330        45.71
      11.031     0.981250       117708        53.33
      11.279     0.984375       118080        64.00
      11.423     0.985938       118267        71.11
      11.599     0.987500       118458        80.00
      11.783     0.989062       118642        91.43
      11.959     0.990625       118836       106.67
      12.111     0.992188       119020       128.00
      12.183     0.992969       119115       142.22
      12.263     0.993750       119212       160.00
      12.343     0.994531       119311       182.86
      12.415     0.995313       119402       213.33
      12.503     0.996094       119492       256.00
      12.567     0.996484       119540       284.44
      12.647     0.996875       119581       320.00
      12.743     0.997266       119630       365.71
      12.903     0.997656       119675       426.67
      13.087     0.998047       119720       512.00
      13.215     0.998242       119743       568.89
      13.415     0.998437       119766       640.00
      13.503     0.998633       119790       731.43
      13.543     0.998828       119815       853.33
      13.679     0.999023       119836      1024.00
      13.767     0.999121       119848      1137.78
      13.815     0.999219       119860      1280.00
      13.863     0.999316       119873      1462.86
      13.999     0.999414       119884      1706.67
      14.055     0.999512       119896      2048.00
      14.079     0.999561       119901      2275.56
      14.111     0.999609       119907      2560.00
      14.151     0.999658       119914      2925.71
      14.175     0.999707       119919      3413.33
      14.207     0.999756       119924      4096.00
      14.231     0.999780       119928      4551.11
      14.239     0.999805       119931      5120.00
      14.247     0.999829       119933      5851.43
      14.255     0.999854       119936      6826.67
      14.263     0.999878       119943      8192.00
      14.263     0.999890       119943      9102.22
      14.263     0.999902       119943     10240.00
      14.263     0.999915       119943     11702.86
      14.271     0.999927       119945     13653.33
      14.279     0.999939       119947     16384.00
      14.279     0.999945       119947     18204.44
      14.287     0.999951       119951     20480.00
      14.287     0.999957       119951     23405.71
      14.287     0.999963       119951     27306.67
      14.287     0.999969       119951     32768.00
      14.287     0.999973       119951     36408.89
      14.287     0.999976       119951     40960.00
      14.287     0.999979       119951     46811.43
      14.287     0.999982       119951     54613.33
      14.295     0.999985       119953     65536.00
      14.295     1.000000       119953          inf
#[Mean    =        3.209, StdDeviation   =        2.714]
#[Max     =       14.288, Total count    =       119953]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  119954 requests in 10.00s, 8.35MB read
Requests/sec:  11995.58
Transfer/sec:    855.15KB
```

Была построена гистограмма распределения запросов:
![normal_get_result.png](..%2Fwrk_result%2Fgraph%2Fnormal_get_result.png)


### Нахождение точки разладки для delete запроса
Скрипт использует генератор случайных чисел для
создания случайных идентификаторов

Аналоино был понижен rps с 13000 до 12000, для стабильной работы.

```
Running 10s test @ http://localhost:8080
  1 threads and 1 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     3.24ms    2.25ms  13.26ms   71.97%
    Req/Sec       -nan      -nan   0.00      0.00%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%    2.72ms
 75.000%    4.34ms
 90.000%    6.50ms
 99.000%   10.18ms
 99.900%   12.57ms
 99.990%   13.15ms
 99.999%   13.26ms
100.000%   13.27ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       0.054     0.000000            2         1.00
       0.899     0.100000        12015         1.11
       1.334     0.200000        23997         1.25
       1.762     0.300000        36006         1.43
       2.207     0.400000        48001         1.67
       2.717     0.500000        60031         2.00
       3.005     0.550000        65995         2.22
       3.319     0.600000        72026         2.50
       3.633     0.650000        77999         2.86
       3.951     0.700000        84005         3.33
       4.343     0.750000        90025         4.00
       4.559     0.775000        93021         4.44
       4.815     0.800000        96000         5.00
       5.203     0.825000        98984         5.71
       5.699     0.850000       102008         6.67
       6.095     0.875000       104999         8.00
       6.291     0.887500       106505         8.89
       6.499     0.900000       108007        10.00
       6.719     0.912500       109495        11.43
       6.955     0.925000       110984        13.33
       7.199     0.937500       112482        16.00
       7.347     0.943750       113241        17.78
       7.567     0.950000       113985        20.00
       7.875     0.956250       114735        22.86
       8.271     0.962500       115483        26.67
       8.735     0.968750       116246        32.00
       8.911     0.971875       116612        35.56
       9.119     0.975000       116989        40.00
       9.287     0.978125       117360        45.71
       9.487     0.981250       117746        53.33
       9.711     0.984375       118116        64.00
       9.815     0.985938       118297        71.11
       9.959     0.987500       118489        80.00
      10.095     0.989062       118676        91.43
      10.231     0.990625       118857       106.67
      10.439     0.992188       119044       128.00
      10.575     0.992969       119142       142.22
      10.695     0.993750       119234       160.00
      10.831     0.994531       119324       182.86
      11.055     0.995313       119419       213.33
      11.383     0.996094       119512       256.00
      11.791     0.996484       119560       284.44
      12.039     0.996875       119606       320.00
      12.199     0.997266       119652       365.71
      12.303     0.997656       119703       426.67
      12.359     0.998047       119746       512.00
      12.391     0.998242       119770       568.89
      12.439     0.998437       119794       640.00
      12.471     0.998633       119816       731.43
      12.519     0.998828       119841       853.33
      12.591     0.999023       119863      1024.00
      12.647     0.999121       119876      1137.78
      12.695     0.999219       119889      1280.00
      12.727     0.999316       119898      1462.86
      12.775     0.999414       119911      1706.67
      12.839     0.999512       119922      2048.00
      12.863     0.999561       119928      2275.56
      12.887     0.999609       119935      2560.00
      12.903     0.999658       119939      2925.71
      12.943     0.999707       119945      3413.33
      12.991     0.999756       119951      4096.00
      13.015     0.999780       119955      4551.11
      13.031     0.999805       119957      5120.00
      13.047     0.999829       119960      5851.43
      13.095     0.999854       119963      6826.67
      13.119     0.999878       119966      8192.00
      13.143     0.999890       119967      9102.22
      13.167     0.999902       119969     10240.00
      13.191     0.999915       119971     11702.86
      13.215     0.999927       119973     13653.33
      13.215     0.999939       119973     16384.00
      13.223     0.999945       119975     18204.44
      13.223     0.999951       119975     20480.00
      13.223     0.999957       119975     23405.71
      13.231     0.999963       119976     27306.67
      13.239     0.999969       119978     32768.00
      13.239     0.999973       119978     36408.89
      13.239     0.999976       119978     40960.00
      13.239     0.999979       119978     46811.43
      13.239     0.999982       119978     54613.33
      13.255     0.999985       119979     65536.00
      13.255     0.999986       119979     72817.78
      13.255     0.999988       119979     81920.00
      13.255     0.999989       119979     93622.86
      13.255     0.999991       119979    109226.67
      13.271     0.999992       119980    131072.00
      13.271     1.000000       119980          inf
#[Mean    =        3.244, StdDeviation   =        2.249]
#[Max     =       13.264, Total count    =       119980]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  119981 requests in 10.00s, 7.78MB read
Requests/sec:  11998.16
Transfer/sec:    796.75KB
```

Была построена гистограмма распределения запросов:
![normal_delete_result.png](..%2Fwrk_result%2Fgraph%2Fnormal_delete_result.png)

### Профилирование put
#### CPU
Библиотека one-nio затратила 20.81% на работу с запросами.
Операции записи ответа в сокет занимают всего 2.26%.
Операции сравнения MemorySegment занимают 11.31%.
#### Alloc
На созание MemorySegment затраивается 10.77%.
Основне аллокации происходят на one-nio.

### Профилирование get
#### CPU
На сравнение MemorySegment ушло 13.33%.
На работу с запросами уошло 22.38%.
#### Alloc
Большая часть аллокаций приходится на библиотеку one-nio