### Анализ производительности системы

Экспериментальное исследование работы сервиса выявило значительные изменения в его функционировании при различных условиях нагрузки и конфигурации.

## Конфигурационные параметры

В рамках проведения тестирования использовались следующие начальные настройки:

- Размер очереди: `1000`
- Размер кластера: `3`
- `FLUSH_THRESHOLD`: `512 Кб`
- Потоков в каждом: `16`

## Процесс профилирования

Профилирование осуществлялось в три режима: `cpu`, `alloc` и `lock`.

- Количество соединений: `128`
- Количество потоков: `128`
- Продолжительность теста: `30 секунд`

## Результат тестов

В сравнении со старыми значениями результат значительно ухудшился, сервис не справляется с предыдущими значениями RPS. Ниже представлено сравнение текущих значений и предыдущих:

| Запрос | lab2   | lab3  |
|--------|--------|-------|
| put    | 175000 | 35000 |
| get    | 175000 | 40000 |

Диаграмма для put:
![put_result.png](..%2Flab3%2Fwrk_result%2Fput_result.png)

Диаграмма для get:
![get_result.png](..%2Flab3%2Fwrk_result%2Fget_result.png)

## Результат профилиования

### Put
- `~29.7%` в CPU уходит на httpClient.
- Сравнивая с предыдущей работой в Alloc нам добавились аллокации httpClient.
- Также в Lock добавились локи `~25%` httpClient.
### Get
- Также httpClient занимает порядка `~30%` CPU.
- Теперь на Alloc httpClient уходит около `~20%`.
- Также в Lock добавились локи `~27%` httpClient, а лок тредов занимает `~1.8%`.