## Производительность

- **PUT Запросы:**

  | Запрос | lab3    | lab4 ack2 | lab4 ack3 |
  |--------|---------|-----------|-----------|
  | rps    | 35000   | 14500     | 9750      |
  | avg    | 15.85ms | 68.08ms   | 37.12ms   |
  | Stdev  | 29.97ms | 40.66ms   | 47.28ms   |

  Произошло снижение производительности примерно в `2.5` раза для `ack = 2` и `3.5` раза для `ack = 3`.

  - `ack = 2`
![put_ack2.png](..%2Flab4%2Fwrk_result%2Fput_ack2.png)
  - `ack = 3`
![put.png](..%2Flab4%2Fwrk_result%2Fput.png)


- **GET Запросы:**

  | Запрос | lab3    | lab4 ack2 | lab4 ack3 |
  |--------|---------|-----------|-----------|
  | rps    | 40000   | 14500     | 9500      |
  | avg    | 17.40ms | 96.85ms   | 44.91ms   |
  | Stdev  | 20.24ms | 42.12ms   | 33.99ms   |

  Произошло снижение производительности примерно в `2.75` раза для `ack = 2` и `4` раза для `ack = 3`.

  - `ack = 2`
![get_ack2.png](..%2Flab4%2Fwrk_result%2Fget_ack2.png)
  - `ack = 3`
![get.png](..%2Flab4%2Fwrk_result%2Fget.png)


## Причины Деградации Производительности

Снижение производительности происходит из-за необходимости ожидания ответа не только от одного, а сразу от кворума узлов. 
Это приводит к последовательному ожиданию ответов от нескольких узлов, что замедляет обработку запросов.

## Результат профилирования

- **PUT Запросы:**
    - Время на отправку ответов клиенту и ожидание ответов от проксируемых узлов осталось на прежнем уровне.
    - Объем работы в воркерах увеличился, особенно заметно на `ThreadPoolExecutor.runWorker`.
- **GET Запросы:**
    - Заметно увеличение работы в воркерах, особенно на этапе `Server.processRequest`, где происходит параллельное ожидание 
ответов от кворума узлов.

## Выводы
При использовании значений ack = 3 и from = 3, произошло существенное снижение производительности системы.
Это связано с необходимостью ожидания ответа не только от одного, а сразу от кворума узлов. Это приводит 
к увеличению времени обработки запросов из-за последовательного ожидания ответов от нескольких узлов.
Но для придания системе отказоустойчивости, приходится жертвовать быстродействием. При неполадках с одним или несколькими узлами, 
данные остаются доступными, если количество активных узлов превышает или равно значению from - ack + 1. В данном случае 
оптимальными значениями будут являться ack = 2 и from = 3, позволяя восстановить данные в случае неполадок с одним из узлов
и увеличить показатель rps.

