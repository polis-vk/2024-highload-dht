# Отчет о тестировании
## Использованные методы
Предварительно заполнил хранилище на размер ~2.2Gb с помощью
put запросов из wrk как в предыдущих stage

### Запрос

```
curl "http://localhost:8080/v0/entities?start=1" 
 ```

```dtd
./asprof -d 150 -e cpu -f get_cpu_stage6.html jps
```

Анализ CPU:
![cpu.png](stage6%2Fcpu.png)
Наибольшая нагрузка как и в предыдущих частях приходится на ожидание
потоков, также значительная часть тратится на запись в сессию с помощью
Session.write()


Анализ ALLOC:
![alloc.png](stage6%2Falloc.png)
Большее количество аллокаций приходится на конвертацию из String в 
byte[], а также на чтение из dao (readObject()) и копирование массивов
заданного диапазона с помощью copyOfRange()


Анализ LOCK:
![lock.png](stage6%2Flock.png)
На графике lock ничего удивительного - большая нагрузка приходится
на session.write(), который как раз вызыватеся при вызове handleLocalEntitiesRequest()
когда мы и обрабатываем наш большой запрос v0/entities/
